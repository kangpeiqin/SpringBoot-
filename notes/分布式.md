<p> <a href="../README.md">返回首页</a></p>

# 分布式
## CAP 理论
## 微服务架构
### 服务治理
让作为消费者的微服务知道服务提供者并能够进行消费

## Zookeeper
分布式应用程序协调服务，提供了一些在分布式环境下的通知或者存储的手段。是一个为分布式应用提供一致性服务的软件，为大型分布式计算提供开源的分布式配置服务、同步服务和命名注册。
### Java `ZK` 客户端库
zookeeper，GitHub 地址：https://github.com/apache/zookeeper
curator，GitHub 地址：https://github.com/apache/curator
### 基本操作
ZK 定义了每一个记录必须有一个对应路径，类似于 Linux 标准文件系统。
- 分布式锁的实现

参考文档：
- <a href = 'https://github.com/HelloGitHub-Team/HelloZooKeeper' target='view_window'>HelloZookeeper</a>
- https://www.jianshu.com/p/1f4c70d7ef40

## 消息队列
> 流量削峰、系统解耦(消息发布与订阅)。
#### 生产者
作为消息系统的客户端，生产消息，并投递到消息系统中
#### 消费者
从消息系统中获取消息并进行相应的处理
### Kafka
#### 基本概念
- 主题和分区
> - 消息通过主题进行分类。
> - 一个主题可以包含多个分区，消息被追加写入分区的尾部。通过分区来实现数据冗余和伸缩性。分区可以分布在不同的服务器上。
```text
          主题 "topicName"
分区0：  --------------------     <——
分区1：  -----------------       <——消息写入
....    --------------------      <——
```
- 批次
> 属于同一主题和分区的一组消息，可以将消息分成批次传输，较少网络开销。
- 偏移量
> 是一个不断递增的数值，用来区分已经读取过的消息。在给定分区里，每个消息的偏移量都是唯一的。
消费者把每个分区最后读取的消息偏移量保存在 `Zookeeper` 或者 `Kafka` 上，这样如果消费者关闭或者重启，它的读取状态不会丢失。
- `broker`和集群
> 一个独立的`Kafka`服务器被称为`broker`。`broker`接收来自生产者的消息，为消息设置偏移量，并提交消息到磁盘保存。
为消费者提供服务，对读取分区的请求作出响应，返回已经提交到磁盘上的消息。
### RabbitMQ


## 搜索
### Elasticsearch