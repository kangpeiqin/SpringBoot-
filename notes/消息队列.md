## 消息中间件
- 简介
消息是指在应用间传递的数据。消息中间件是指利用高效可靠的消息传递机制进行与平台无关的数据交流。
> 两种模式：点对点、发布订阅
- 作用
> 流量削峰、系统解耦(消息发布与订阅)、异步通信。
#### 生产者
作为消息系统的客户端，生产消息，并投递到消息系统中
#### 消费者
从消息系统中获取消息并进行相应的处理
### [RabbitMQ](http://rabbitmq.mr-ping.com/tutorials_with_python/[1]Hello_World.html)
#### AMQP(高级队列协议)
#### 特点
- 可靠性：使用持久化、传输确认、发布确认等保证可靠性。
- 灵活的路由

### Kafka
#### 基本概念
- 主题和分区
> - 消息通过主题进行分类。
> - 一个主题可以包含多个分区，消息被追加写入分区的尾部。通过分区来实现数据冗余和伸缩性。分区可以分布在不同的服务器上。
```text
          主题 "topicName"
分区0：  --------------------     <——
分区1：  -----------------       <——消息写入
....    --------------------      <——
```
- 批次
> 属于同一主题和分区的一组消息，可以将消息分成批次传输，较少网络开销。
- 偏移量
> 是一个不断递增的数值，用来区分已经读取过的消息。在给定分区里，每个消息的偏移量都是唯一的。
消费者把每个分区最后读取的消息偏移量保存在 `Zookeeper` 或者 `Kafka` 上，这样如果消费者关闭或者重启，它的读取状态不会丢失。
- `broker`和集群
> 一个独立的`Kafka`服务器被称为`broker`。`broker`接收来自生产者的消息，为消息设置偏移量，并提交消息到磁盘保存。
为消费者提供服务，对读取分区的请求作出响应，返回已经提交到磁盘上的消息。
